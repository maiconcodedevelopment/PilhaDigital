$(document).ready(function () {
    $("menu-cabecalho li ul").hide().removeClass("fallback");
    $("menu-cabecalho li").hover(function () {
        $("ul", this).stop().slideDown(400)
    }, function () {
        $("ul", this).stop().slideUp(400)
    });
    $(".show-not").click(function () {
        if ($(".notificacoes ul").css("display") == "none") {
            $(".notificacoes ul").slideDown(200)
        } else {
            $(".notificacoes ul").slideUp(200)
        }
    });
    $("nav li ul").hide().removeClass("fallback");
    $("nav li").hover(function () {
        $("ul", this).stop().slideDown(400)
    }, function () {
        $("ul", this).stop().slideUp(400)
    });
    $(".menu .top-acessadas").mouseenter(function () {
        var d = $(this).attr("class");
        var c = $(this).closest("div");
        c = $(c).closest(".mais-acessadas");
        c = $(c).find("h2").attr("class");
        c = c.split("-");
        c = c[0];
        d = d.split(" ");
        d = d[1];
        d = d.split("-");
        d = d[1];
        $(".menu ul li ." + c + " .mais-acessadas img").hide();
        $(".menu ul li ." + c + " .mais-acessadas .img-ac-" + d).show()
    });
    $(".menu-rodape .top-acessadas").mouseenter(function () {
        var d = $(this).attr("class");
        var c = $(this).closest("div");
        c = $(c).closest(".mais-acessadas");
        c = $(c).attr("class");
        c = c.split(" ");
        c = c[1];
        d = d.split(" ");
        d = d[1];
        d = d.split("-");
        d = d[1];
        $(".menu-rodape ul li ." + c + " img").hide();
        $(".menu-rodape ul li ." + c + " .img-ac-" + d).show()
    });
    $(".menu-rodape ul li").mouseenter(function () {
        ancoraMenu("#menu-rodape")
    });
    $(".topo").click(function () {
        $("html, body").animate({
            scrollTop: 0
        }, 800)
    });
    $(".s-usuario").click(function (a) {
        if ($(".login-rol").css("display") == "block") {
            $(".login-rol").slideUp(200)
        } else {
            $(".login-rol").slideDown(200)
        }
        a.stopPropagation()
    });
    $(".login-rol").click(function (a) {
        a.stopPropagation()
    });
    $(document).click(function () {
        $(".login-rol").slideUp(200)
    });
    $(".pesquisa-rol").focusin(function (a) {
        $('#cabecalho-r .pesquisar-rol input[type="submit"]').show();
        $(".pesquisa-rol").animate({
            width: "244px"
        }, 400);
        $(".pesquisa-rol").css("border-bottom", "3px solid #e3e4e8");
        $(".pesquisar-rol img").hide()
    });
    $(".pesquisa-rol").focusout(function (a) {
        if ($(".pesquisa-rol").val() == "") {
            $('#cabecalho-r .pesquisar-rol input[type="submit"]').hide();
            $(".pesquisar-rol img").show();
            $(".pesquisa-rol").animate({
                width: "212px"
            }, 400);
            $(".pesquisa-rol").css("border-bottom", "none")
        }
    });
    $("#banner-slide").bjqs({
        animtype: "slide",
        height: 310,
        width: 628
    });
    $(".bloco-materia").mouseover(function () {
        var d = $(this).find(".compartilhar-materia");
        var c = $(this).find(".materia-conteudo a");
        $(c).css("color", "#949494");
        $(c).css("font-size", "16px");
        $(d).show()
    });
    $(".bloco-materia").mouseout(function () {
        var d = $(this).find(".compartilhar-materia");
        var c = $(this).find(".materia-conteudo a");
        $(c).css("color", "#000000");
        $(c).css("font-size", "18px");
        $(d).hide()
    });
    $(".bloco-materia-img").mouseover(function () {
        var d = $(this).find(".compartilhar-materia");
        var c = $(this).find(".materia-conteudo a");
        $(c).css("color", "#949494");
        $(c).css("font-size", "13px");
        $(d).show()
    });
    $(".bloco-materia-img").mouseout(function () {
        var d = $(this).find(".compartilhar-materia");
        var c = $(this).find(".materia-conteudo a");
        $(c).css("color", "#000000");
        $(c).css("font-size", "14px");
        $(d).hide()
    });
    $(".bloco-materia-expand").mouseover(function () {
        var d = $(this).find(".compartilhar-materia");
        var c = $(this).find(".materia-conteudo a");
        $(c).css("color", "#949494");
        $(c).css("font-size", "13px");
        $(d).show()
    });
    $(".bloco-materia-expand").mouseout(function () {
        var d = $(this).find(".compartilhar-materia");
        var c = $(this).find(".materia-conteudo a");
        $(c).css("color", "#000000");
        $(c).css("font-size", "14px");
        $(d).hide()
    });
    $(".social-share input").click(function () {
        $(this).select()
    });
    $(".accordion-item").on("mouseenter", function () {
        $("section.accordion-item-first").removeClass("accordion-item-first");
        $("div.accordion-item-content-first").removeClass("accordion-item-content-first");
        $("div.accordion-title-first").removeClass("accordion-title-first");
        $(this).find("h2").css("color", "#FFFFFF")
    }).on("mouseleave", function () {
        $(this).find("h2").css("color", "#9597a0")
    });
    $(".list-comentarios .comentario .comentario-content").on("mouseenter", function () {
        $(this).find(".denunciar").show();
        $(this).find(".data").show()
    }).on("mouseleave", function () {
        $(this).find(".denunciar").hide();
        $(this).find(".data").hide()
    });
    $(".menu ul li").on("mouseenter", function () {
        var b = $(this).find(".menu-col .sub");
        $(b).stop().fadeIn(400)
    }).on("mouseleave", function () {
        var b = $(this).find(".menu-col .sub");
        $(b).stop().fadeOut(150)
    });
    $(".menu-rodape ul li").on("mouseenter", function () {
        var b = $(this).find(".menu-col .sub");
        $(b).stop().fadeIn(400)
    }).on("mouseleave", function () {
        var b = $(this).find(".menu-col .sub");
        $(b).stop().fadeOut(150)
    });
    $(".top-artigos .tabs-menu a").click(function (b) {
        b.preventDefault();
        $(this).parent().addClass("current");
        $(this).parent().siblings().removeClass("current");
        var a = $(this).attr("href");
        $(".tab-content").not(a).css("display", "none");
        $(a).fadeIn()
    });
    $(".painel-inner .tabs-menu a").click(function (b) {
        b.preventDefault();
        $(this).parent().addClass("current");
        $(this).parent().siblings().removeClass("current");
        var a = $(this).attr("href");
        $(".tab-content").not(a).css("display", "none");
        $(a).fadeIn()
    });
    if ($(".form-padrao").length) {
        jQuery.extend(jQuery.validator.messages, {
            required: "Por favor, preencha o campo em destaque.",
            email: "E-mail inválido.",
            number: "Please enter a valid number.",
            equalTo: "A confirmação de senha não confere",
        })
    }
    $(".edit-form").click(function () {
        $("input").removeAttr("disabled");
        return false
    });
    if ($('input[name="data"]').length) {
        $('input[name="data"]').mask("99/99/9999")
    }
    if ($('input[name="dt_nascimento"]').length) {
        $('input[name="dt_nascimento"]').mask("99/99/9999")
    }
    $(".tabela-padrao td .mensagem").click(function () {
        var a = $(this).find(".inner").html();
        $(".mtlsr-lightbox").fadeIn();
        $("body").append('<img class="img-calcula" style="display:none">');
        $(".mtlsr-lightbox").append('<div class="msg-sucesso msg-painel"><a href="#" class="close"></a><span style="width: 147px;">Mensagem</span><div class="conteudo-mensagem">' + a + '</div></div><div class="full-overlay"></div><script>$(".full-overlay").click(function(){$(".mtlsr-lightbox .close").click();});<\/script>')
    });
    if ($("#datepicker").length) {
        $("#datepicker").datepicker();
        $("#datepicker").datepicker("option", "showAnim", "slideDown")
    }
    if ($(".slide-show .carousel").length) {
        $(".slide-show .carousel").slick({
            slidesToShow: 3,
            slidesToScroll: 3
        })
    }
    if ($(".carousel-professor .carousel").length) {
        $(".carousel-professor .carousel").slick({
            slidesToShow: 4,
            slidesToScroll: 4
        })
    }
});

function init() {
    window.addEventListener("scroll", function (c) {
        var b = window.pageYOffset || document.documentElement.scrollTop,
            a = 213,
            d = document.querySelector("header");
        if (b > a) {
            classie.add(d, "smaller");
            $("#cabecalho-r").slideDown(200);
            $(".bloco-fixo-esquerda div").addClass("skyOmniaHeader");
            $(".item-double-relative .omnia-bg-full iframe[scrolling='no']").addClass("omnia-bg-margim-top")
        } else {
            if (classie.has(d, "smaller")) {
                classie.remove(d, "smaller");
                $("#cabecalho-r").slideUp(200);
                $(".bloco-fixo-esquerda div").removeClass("skyOmniaHeader");
                $(".item-double-relative .omnia-bg-full iframe[scrolling='no']").removeClass("omnia-bg-margim-top")
            }
        }
    })
}
window.onload = init();

function ancoraMenu(a) {
    $("html, body").animate({
        scrollTop: $(a).offset().top - 100
    }, 1)
}

function DropDown(a) {
    this.dd = a;
    this.placeholder = this.dd.children("span");
    this.opts = this.dd.find("ul.dropdown > li");
    this.val = "";
    this.index = -1;
    this.initEvents()
}
DropDown.prototype = {
    initEvents: function () {
        var a = this;
        a.dd.on("click", function (b) {
            $(this).toggleClass("active");
            return false
        });
        a.opts.on("click", function () {
            var b = $(this);
            a.val = b.text();
            a.index = b.index();
            a.placeholder.text(a.val)
        })
    },
    getValue: function () {
        return this.val
    },
    getIndex: function () {
        return this.index
    }
};

function checkboxlimit(a, b) {
    var a = a;
    var b = b;
    for (var c = 0; c < a.length; c++) {
        a[c].onclick = function () {
            var e = 0;
            for (var d = 0; d < a.length; d++) {
                e += (a[d].checked) ? 1 : 0
            }
            if (e > b) {
                this.checked = false
            }
        }
    }
}
$(function () {
    var a = new DropDown($("#dd-profissao"));
    var a = new DropDown($("#dd-cidade"));
    var a = new DropDown($("#dd-estado"));
    var a = new DropDown($("#dd-pais"));
    var a = new DropDown($("#dd-enviar-para"));
    var a = new DropDown($("#dd-subsecao"));
    var a = new DropDown($("#dd-secao"));
    var a = new DropDown($("#dd-secao-2"));
    $(document).click(function () {
        $(".wrapper-dropdown").removeClass("active")
    })
});

function limitarCampo(b, c) {
    var a = b.value;
    if (a.length >= c) {
        b.value = a.substring(0, c)
    }
    return true
}

function contaCaracteres(b, a) {
    if (b != "") {
        $("#" + a).html(b.length)
    } else {
        $("#" + a).html("0")
    }
}

function enviarComentario(form, form_id) {
    var tipoEmail = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
    if (form.nome.value == "nome" || form.nome.value == "") {
        $("#" + form_id + " p").remove();
        $("#" + form_id).append('<p class="comentario_alerta">* Informe seu nome</p>')
    } else {
        if (form.nome.value.length < 2) {
            $("#" + form_id + " p").remove();
            $("#" + form_id).append('<p class="comentario_alerta">* Informe um nome v&aacute;lido</p>')
        } else {
            if (form.email.value == "" || form.email.value == "e-mail") {
                $("#" + form_id + " p").remove();
                $("#" + form_id).append('<p class="comentario_alerta">* Informe seu e-mail (ele N&Atilde;O SER&Aacute; mostrado nos coment&aacute;rios)</p>')
            } else {
                if (!tipoEmail.test(form.email.value)) {
                    $("#" + form_id + " p").remove();
                    $("#" + form_id).append('<p class="comentario_alerta">* Informe um email v&aacute;lido (ele N&Atilde;O SER&Aacute; mostrado nos coment&aacute;rios)</p>')
                } else {
                    if (form.comentario.value == "" || form.comentario.value == "comentário") {
                        $("#" + form_id + " p").remove();
                        $("#" + form_id).append('<p class="comentario_alerta">* Deixe seu coment&aacute;rio</p>')
                    } else {
                        var comentario = form.comentario.value;
                        comentario = comentario.toLowerCase();
                        $.getJSON(URL + "scripts/blacklist.php", function (data) {
                            var indice = null;
                            $.each(data, function (key, val) {
                                eval("indice = comentario.search(/" + val + "/);");
                                if (indice != "-1") {
                                    $("#" + form_id + " p").remove();
                                    $("#" + form_id).append('<p class="comentario_alerta">* Não é permitido o uso da palavra/termo <i>"' + val + '"</i> nos comentários</p>');
                                    return false
                                }
                            });
                            if (indice == "-1") {
                                $("#" + form_id + " p").remove();
                                var pars = $(form).serialize();
                                $.ajax({
                                    type: "POST",
                                    url: URL + "scripts/enviarComentario.php",
                                    data: pars,
                                    beforeSend: function () {
                                        $("#" + form_id).html('<div class="enviando_comentario"><img src="../images/loading.gif" /><p>enviando comentário...</p></div>')
                                    },
                                    success: function (result) {
                                        if (result == 1) {
                                            $("#" + form_id).html('<div class="comentario_enviado">Comentário enviado com sucesso!</div>')
                                        } else {
                                            $("#" + form_id).html('<div class="erro_comentario">Erro ao enviar comentário! Tente novamente mais tarde.</div>')
                                        }
                                    },
                                    error: function (result) {
                                        $("#" + form_id).html('<div class="erro_comentario">Erro ao enviar comentário! Tente novamente mais tarde.</div>')
                                    }
                                })
                            }
                        })
                    }
                }
            }
        }
    }
    return false
}

function denunciarComentario(c) {
    var b = "id=" + c;
    var a = $.ajax({
        type: "POST",
        url: URL + "scripts/denunciarComentario.php",
        data: b,
        async: false
    }).responseText;
    if (a == "1") {
        $("#comentario_" + c).remove();
        $("#comentarios ul li").each(function (d) {
            if ($(this).attr("value") == c) {
                $(this).remove()
            }
        })
    } else {
        alert("Falha! Tente novamente mais tarde.")
    }
}

function responderComentario(a) {
    $(".resposta_form").css("display", "none");
    $(".resposta_form form").each(function () {
        this.reset()
    });
    $("#resposta_comentario_" + a).css("display", "block")
}

function limparCampo(a, b) {
    if (a.value == b) {
        a.value = ""
    }
}

function preencherCampo(a, b) {
    if (a.value == "" || a.value == " " || a.value == "  " || a.value == "   " || a.value == "    " || a.value == "     ") {
        a.value = b
    }
}

function carregarComentarios(c, b, d) {
    var a = "conteudo_id=" + c + "&total_carregado=" + d;
    $.ajax({
        type: "POST",
        url: URL + "scripts/carregarComentarios.php",
        data: a,
        beforeSend: function () {
            $("#comentarios #barra_maiscomentarios").css("display", "none");
            $("#comentarios").append('<div id="loading_comentarios"><img src="' + URL + 'images/preloaders/preloader.gif" /></div>')
        },
        success: function (e) {
            $("#comentarios #loading_comentarios").css("display", "none");
            $("#comentarios #co-omnia").append(e);
            if ((b - (d + 4)) > 0) {
                $("#comentarios #barra_maiscomentarios").html('<a href="javascript:carregarComentarios(' + c + ", " + b + ", " + (d + 4) + ');">Ver mais coment&aacute;rios (' + (b - (d + 4)) + ")...</a>");
                $("#comentarios #barra_maiscomentarios").css("display", "block")
            }
        },
        error: function (e) {
            $("#comentarios #loading_comentarios").css("display", "none");
            $("#comentarios #barra_maiscomentarios").css("display", "none")
        }
    })
}

function avaliarComentario(d, c) {
    var b = "id=" + d + "&avaliacao=" + c;
    var a = $.ajax({
        type: "POST",
        url: URL + "scripts/avaliarComentario.php",
        data: b,
        async: false
    }).responseText;
    if (a) {
        if (c == 0) {
            $("#avaliacao_negativa_" + d).html(parseInt($("#avaliacao_negativa_" + d).html()) + 1)
        } else {
            $("#avaliacao_positiva_" + d).html(parseInt($("#avaliacao_positiva_" + d).text()) + 1)
        }
        $("#avaliacao_positiva_" + d).removeAttr("href");
        $("#avaliacao_negativa_" + d).removeAttr("href")
    }
}

function ocultaEExibeEstadoCidade(a) {
    if (a == 1) {
        $("#cadastro_membros #estado_cidade").slideDown("fast")
    } else {
        $("#cadastro_membros #estado_cidade").slideUp("fast")
    }
}

function buscaCidades(b) {
    if (b == 0 || isNaN(b)) {
        $("#cidade").html("<option>--</option>")
    } else {
        var a = "estado_id=" + b;
        $.ajax({
            type: "GET",
            url: URL + "scripts/buscaCidades.php",
            data: a,
            beforeSend: function () {
                $("#cidade").html("<option>Carregando...</option>")
            },
            success: function (c) {
                $("#cidade").html(c)
            },
            error: function (c) {
                $("#cidade").html("<option>--</option>")
            }
        })
    }
}

function validaEstado() {
    return true
}

function validaCidade() {
    return true
}

function tabOpenVideo(a) {
    $("#videos_conteudo_tab .local-video").css("display", "none");
    $("#videos_conteudo_tab #" + a).css("display", "block")
}
$("#videos_tab button").click(function () {
    $("#videos_tab button").removeClass("tab-ativa");
    $(this).addClass("tab-ativa")
});